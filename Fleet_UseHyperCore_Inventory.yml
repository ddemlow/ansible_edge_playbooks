---
- name: Retail-edge VM in-guest configuration playbook
  hosts: edge # use ansible-playbook -l group to limit application to specific hypercore groups - has tab completion for -l !
  connection: ansible.builtin.local
  gather_facts: false
  strategy: host_pinned # free  #allows each cluster to start next task before all clusters have finished current task


  tasks:
  - name:  execute ansible-playbook against each cluster / change environment - get local hypercore VM inventory 
    ansible.builtin.command: ansible-playbook -i ./inventory/hypercore_vm_inventory.yml using_hypercore_inventory.yml  #uses hypercore inventory plugin for each cluster (based on environment)
